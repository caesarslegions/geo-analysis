# This is the "ultimate" config file combining all our fixes.

[build]
  # The command to build your site
  command = "bun run build"
  
  # The folder with your built site
  publish = "dist"

[build.environment]
  # Disables the false-positive secret scanner
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

[functions]
  # Tells Netlify where your "doorman" API files are
  directory = "api/"

# --- Redirects for API & React App ---

# Rule 1: Makes sure "/api/..." requests go to your functions.
# This MUST come before the next rule.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Rule 2: The "catch-all" for your React app.
# Any other request goes to your index.html.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

